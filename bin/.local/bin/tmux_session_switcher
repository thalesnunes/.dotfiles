#!/usr/bin/env bash

LIST_SESSIONS='tmux list-sessions -F "#{session_name}" | grep -v "tsm"'
SESS_NAME=$(bash -c "$LIST_SESSIONS" | fzf --reverse --header="Select session to switch (Ctrl-d to kill)" --bind "ctrl-d:execute(tmux kill-session -t {})+reload($LIST_SESSIONS)")
if [[ -z "$SESS_NAME" ]]; then
    exit 0
fi

$XDG_USER_BIN/tmux_init -s "$SESS_NAME"
